# 介绍

常见的分类方法有按照材质分类和按照接口分类。现在常用的接口类型是SATA、PCIe、NVMe。就着材质分类简单的说一下不同接口类型的区别。

[各硬盘对比图](images/SSD-vs-HDD-Form-Factor.png)

X99 电脑主板接口一览：

[X99 V201](./images/X99.jpg)

这块主板上有两个 M.2接口，给出的标识是NGFF M.2 和 NVMe M.2。

NGFF (Next Generation Form Factor) M.2 和 NVMe (Non-Volatile Memory Express) M.2 是两种相关但不同的概念。

NGFF M.2（也称为M.2）是一种硬件接口标准，用于连接内部电路板上的扩展设备，例如固态硬盘（SSD）、无线网卡和蓝牙模块等。它是一种小型、高密度的接口，采用了M.2插槽和连接器。NGFF M.2接口还支持多种协议，包括PCI Express（PCIe）、SATA和USB等。

NVMe M.2是一种在NGFF M.2接口上使用的特定类型的固态硬盘（SSD）。NVMe代表Non-Volatile Memory Express，它是一种专为固态存储器设计的高性能、低延迟的通信协议。与传统的SATA接口相比，NVMe利用PCIe总线的高带宽和低延迟特性，提供更快的数据传输速度和更低的访问延迟。因此，NVMe M.2固态硬盘通常比传统的SATA M.2固态硬盘更快。

简而言之，NGFF M.2是一种硬件接口标准，而NVMe M.2是在NGFF M.2接口上使用的一种高性能固态硬盘。注意，NGFF M.2接口还可以支持其他类型的设备和协议，而不仅限于NVMe固态硬盘。

TODO:AHCI 协议的M.2 盘在两种接口是否都能用
我认为应该是建议使用这些接口用作不同用途的时候能更好的区分吧。目前我的是安装在（）上的，另一个接口是否支持为测试过。

## 几个术语说明

总线：SATA总线、PciE总线

接口/插槽：SATA接口，PciE接口、M.2(NGFF)接口，mSATA接口

协议：AHCI协议、NVME协议

## 常见的集中硬盘的接口类型，走什么总线，使用的协议

HDD:SATA接口，SATA总线，AHCI协议

SSD:SATA接口，SATA总线，AHCI协议

mSATA SSD:mSATA接口，SATA总线，AHCI协议

M.2 SSD:三种情况

    1.M.2接口，SATA总线，AHCI协议
    2.M.2接口，PciE总线，AHCI协议
    3.M.2接口，PciE总线，NVME协议

PciE SSD:PciE接口，PciE总线,NVME协议

## 材质分类

### HDD（Mechanical Hard Disk Driver）：传统硬盘，即机械硬盘

[HHD 硬盘结构图](./images/hdd-structure.png)

是一种传统的存储设备，使用旋转的磁盘和机械臂来读写数据。下面是机械硬盘的详细介绍：

构成：机械硬盘通常由金属外壳、旋转的磁盘（也称为盘片）和移动的读/写磁头组成。磁盘通常是由玻璃或铝制成的圆盘，具有涂有磁性材料的表面。读/写磁头位于磁盘的上方和下方，可以在磁盘上读取和写入数据。

工作原理：机械硬盘的工作原理基于磁性媒体存储技术。当硬盘工作时，磁盘以非常高的速度旋转，通常在每分钟数千转或数万转。读/写磁头通过机械臂的移动来定位到指定的磁道，并在磁盘上的磁性表面上读取或写入数据。读写磁头通过磁性效应与磁盘表面上的磁区进行交互，实现数据的读写操作。

容量和速度：机械硬盘的容量通常较大，从几百GB到数TB不等，具体取决于硬盘的规格和型号。然而，相对于固态硬盘（SSD）而言，机械硬盘的读写速度较慢。机械硬盘的性能受到磁盘旋转速度和机械臂的移动速度的限制。

应用和优势：机械硬盘在许多应用中仍然被广泛使用。它们通常用于桌面计算机、服务器、网络存储设备等需要大容量存储的场景。机械硬盘的主要优势是相对较低的成本和较大的存储容量。它们也相对耐用，并且可以承受较高的温度和湿度。

缺点：与固态硬盘相比，机械硬盘的主要缺点是较慢的读写速度和较高的能耗。由于机械部件的存在，机械硬盘也更容易受到物理冲击和振动的影响，因此相对来说不如固态硬盘坚固耐用。

随着固态硬盘的普及和技术进步，机械硬盘在某些领域逐渐被取代。但由于其较低的成本和大容量存储的优势，机械硬盘仍然是许多存储需求较大的场景中的一种常见选择。

#### 关于 SMR、CMR、PMR

CMR（Conventional Magnetic Recording）和SMR（Shingled Magnetic Recording）是机械硬盘中使用的两种不同的磁记录技术。

CMR（Conventional Magnetic Recording）：CMR是一种传统的磁记录技术，也被称为PMR（Perpendicular Magnetic Recording）。

在CMR中，硬盘上的数据被垂直地记录在磁性盘片上，每个磁道上的数据互不干扰。每个磁道上的数据可以随机读取和写入，而不会影响相邻磁道上的数据。CMR技术在性能和数据可靠性方面表现良好，但在高密度存储方面有一定的限制。

SMR（Shingled Magnetic Recording）：SMR是一种新型的磁记录技术，旨在提高机械硬盘的存储密度。在SMR中，磁道之间存在重叠，类似屋顶瓦片的形状，因此称为"shingled"。

这种重叠布局使得存储密度得以增加，从而在相同物理尺寸下存储更多的数据。

然而，由于磁道重叠，SMR硬盘的数据写入方式有所不同。当写入新数据时，需要覆盖一部分相邻的磁道，这可能导致性能下降和数据写入速度变慢。

为了处理这种特殊的写入方式，SMR硬盘通常需要使用特殊的算法和缓存策略。

#### 判断机械硬盘性能的一些参考数据

转速（RPM）：

    转速是指硬盘盘片旋转的速度，常见的机械硬盘转速包括5400 RPM、7200 RPM和10000 RPM。
    转速越高，硬盘的数据读写速度通常越快，但也伴随着更高的能耗和噪音。

缓存缓冲区大小（Cache Buffer）：

    缓存缓冲区是硬盘内部用于临时存储数据的高速内存。
    较大的缓存缓冲区可以提高硬盘的读写性能，尤其是对于连续读写操作而言。

平均寻道时间（Average Seek Time）：

    平均寻道时间是指硬盘读取数据时，磁头从一个磁道移动到另一个磁道的平均时间。
    较低的平均寻道时间表示硬盘更快地定位所需数据，因此性能更好。

数据传输速率（Data Transfer Rate）：

    数据传输速率是指硬盘读取和写入数据的速度，通常以每秒传输的数据量（MB/s或GB/s）来表示。
    较高的数据传输速率意味着硬盘可以更快地处理大量数据的读写操作。

MTBF（Mean Time Between Failures）：

    MTBF是指硬盘平均故障间隔时间，即两次故障之间的平均时间。
    较高的MTBF值表示硬盘的可靠性更高，更不容易出现故障。

#### 其他

大多数的机械硬盘的接口是sata口，并且由于其结构的特殊性，还需要外接电源使用。

尺寸一般笔记本的是2.5英寸，台式机的是3.5英寸，还有一种1.8英寸的用于超薄型笔记本电脑和便携式媒体播放器等设备。

西部数据使用色调风格来区分不同型号的硬盘使用场景:

- 黑盘: 高性能
- 蓝盘: 平衡
- 绿盘: 节能(已并入蓝盘)
- 红盘: NAS 级
- 紫盘: 监控级
- 金盘: 数据中心专用

### SSD（Solid State Disk）：固态硬盘

是一种使用固态存储器芯片来存储数据的存储设备。相对于传统的机械硬盘（HDD），固态硬盘具有以下特点：

构成：固态硬盘由多个闪存芯片组成，这些芯片通常是基于闪存存储技术，如NAND闪存。固态硬盘中的闪存芯片通过控制器芯片进行管理和控制。

工作原理：固态硬盘使用非易失性存储器（Non-Volatile Memory），数据在断电时也能保持不变。固态硬盘中的闪存芯片使用电子门结构来存储数据，而不需要机械部件进行读写操作。数据的读取和写入通过电子信号在芯片内部进行。

速度：固态硬盘相比机械硬盘具有更快的数据传输速度和更低的访问延迟。由于无需旋转磁盘和机械臂的移动，固态硬盘能够实现更快速的数据读取和写入操作，从而提供更快的启动时间、文件传输速度和应用程序响应速度。

容量：固态硬盘的容量范围广泛，从几十GB到多TB不等。随着技术的进步，固态硬盘的容量不断增加，满足了大容量存储的需求。

耐用性：相对于机械硬盘，固态硬盘更加耐用。固态硬盘没有移动部件，因此不受机械故障和物理振动的影响。此外，固态硬盘支持更快的读写操作，减少了对存储介质的磨损。

能效和静音：固态硬盘相对于机械硬盘更加节能，并且产生较少的噪音。由于没有旋转磁盘和机械臂的运动，固态硬盘的功耗较低，从而降低了能源消耗和散热需求。

固态硬盘在各种场景中得到广泛应用，包括个人计算机、笔记本电脑、服务器、数据中心等。它们提供了更快的系统性能、更高的数据安全性和更广泛的应用程序兼容性，逐渐取代了机械硬盘成为首选的存储解决方案。

#### mSATA

mSATA（mini-SATA）是一种小型的固态硬盘接口标准，用于连接存储设备，类似于传统的2.5英寸SATA硬盘。以下是mSATA的详细介绍：

1.尺寸：

    - mSATA接口采用迷你化设计，尺寸较小，仅约3.7厘米（宽）x 5厘米（长）。这使得mSATA适用于空间有限的设备，如超薄笔记本电脑、小型工控机和嵌入式系统。

2.接口：

    - mSATA采用SATA（Serial ATA）接口，与传统的2.5英寸SATA硬盘使用相同的数据传输协议。这意味着mSATA固态硬盘可以直接连接到支持SATA接口的主板或扩展卡上。

3.性能：

    - mSATA固态硬盘的性能与传统的2.5英寸SATA固态硬盘类似。它们通常具有较高的读写速度和较低的访问延迟，提供更快的数据传输和响应时间。

4.容量：

    - mSATA固态硬盘的容量范围广泛，从几十GB到几百GB不等。一些较新的mSATA固态硬盘还提供更大的容量选项，如500GB和1TB。

5.应用：

    - mSATA固态硬盘适用于需要小型存储设备的场景，如便携式电脑、超薄笔记本电脑、工业控制系统和嵌入式应用。它们可以作为主要系统驱动器或额外的存储扩展。

#### 2.5英寸SSD

2.5英寸SSD（Solid State Drive）是一种固态硬盘，采用2.5英寸的标准尺寸，常用于替换传统的机械硬盘或在2.5英寸硬盘托架中使用。它由闪存存储芯片和控制器组成，使用固态存储技术来存储和访问数据。

2.5英寸SSD的主要特点包括：

尺寸：2.5英寸SSD的尺寸与传统的2.5英寸机械硬盘相同，通常为约100mm × 70mm × 7mm（长度 × 宽度 × 高度），使其适用于标准的2.5英寸硬盘托架和插槽。

存储技术：2.5英寸SSD采用固态存储技术，通常是基于闪存存储芯片，如NAND闪存。这种技术消除了传统机械硬盘中的旋转磁盘和机械臂，使SSD具有更快的数据访问速度和更低的访问延迟。

容量：2.5英寸SSD的容量范围广泛，从几十GB到数TB不等。用户可以根据自己的需求选择适当的容量。

性能：2.5英寸SSD具有较高的数据传输速度和响应速度。相对于机械硬盘，它们具有更快的启动时间、文件传输速度和应用程序加载速度。

低功耗：由于没有机械部件，2.5英寸SSD在工作时的功耗较低，这有助于延长笔记本电脑或移动设备的电池寿命。

可靠性：2.5英寸SSD相对于机械硬盘具有更高的耐震性和抗冲击性，因为它们不受机械部件的限制。

#### M.2(NGFF)

M.2（也称为NGFF，Next Generation Form Factor）是一种小型、高性能的固态硬盘（SSD）和无线网卡等设备的接口标准。下面是M.2的详细介绍：

1.尺寸和接口：

    - M.2接口采用小型化设计，尺寸较小，通常为22毫米宽和30、42、60或80毫米长。它的插槽设计使得设备连接更紧凑，适用于各种设备，包括笔记本电脑、台式机和嵌入式系统。
    - M.2接口可以支持多种协议和接口类型，包括SATA（Serial ATA）、PCIe（Peripheral Component Interconnect Express）和NVMe（Non-Volatile Memory Express）。这意味着M.2设备可以使用不同的接口标准进行数据传输，具有更高的灵活性和性能。

2.存储设备：

    - M.2主要用于连接固态硬盘（SSD），提供更快的数据传输速度和更低的访问延迟。M.2 SSD可以采用SATA、PCIe或NVMe接口，其中PCIe和NVMe接口提供更高的性能和速度。

3.无线网卡：

    - M.2接口还广泛用于连接无线网卡和蓝牙模块。这些M.2无线模块提供了无线网络连接和蓝牙功能，可用于笔记本电脑、台式机和其他设备。

4.容量和性能：

    - M.2设备的容量范围广泛，从几十GB到几TB不等，具体容量取决于具体的设备型号和制造商。
    - M.2固态硬盘通常具有较高的读写速度和较低的访问延迟，提供更快的数据传输和响应时间。PCIe和NVMe接口的M.2 SSD可以实现更高的性能，特别适用于需要大量数据处理的高性能应用。

5.应用：

    - M.2接口适用于各种设备，包括桌面计算机、游戏机、服务器、超薄笔记本电脑和嵌入式系统。它们可以作为主要系统驱动器或额外的存储扩展，提供更快的启动时间和应用程序加载速度。

##### B-Key(Socket 2) 和 M-Key(Socket 3)

[B-key M-key插槽图](./images/M.2-keys-b-m-slot.jpg)

如上图所示，B key 之防呆键位位于面对插槽方向的左方，M key 则偏于右方。不同类型之插槽其短边接腳数量有所差异（B key 短边為 6 pin，M key 為 5 pin），以此若使用者翻面插入时，將會有所阻碍。

区别是B-key使用的是SATA、PciE2总线，但都是使用的AHCI协议；而M-key使用的PciE4总线，协议则是AHCI、NVME都支持

[B-key M-key接口详细引脚图](./images/keys-b-m_engl.jpg)
[B-key M-key接口图](./images/E6nlSGT.jpg)

B-key 插槽使用的并不多，所以相应接口的硬盘也很少，大多数的硬盘都是使用的M-key或者是B&M-key(兼容更多的设备)。

只用B-key接口的只能使用AHCI协议，所以和SATA的差不多；

使用B&M key的由于要考虑SATA总线，所以必定是AHCI协议；

使用M-key的具体使用的哪种协议需要看这个硬盘的详细介绍，由于NVME是最快的，如果是一般都会明显标出，当然也就更贵

#### 几种SSD的该如何选择

mSATA、SSD、Sata M.2要么受制于AHCI协议，要么是被SATA总线限制，其速度都是差不多的，不同是应用场景：

mSata 需要特定的插槽，现在几乎很难找到对应的；

SSD的大小仅仅是在内部的主板上外套了一个壳，这个壳是为了能够兼容2.5英寸的HHD的安装位置所设计的，内部大小和mSATA大小差不多，优点是更轻巧，而且不用担心剧烈震动造成影响；

Sata M.2则是大大优化了空间，对于像笔记本ITX小主机这类，需要极致的压缩空间的是很不错的选择

这里简单说一些选择NVME M.2的参考：

1.PCIe版本：选择支持较新PCIe版本（如PCIe 3.0或PCIe 4.0）的M.2硬盘，因为这些版本提供更高的数据传输速度和性能。(映射到实际的也是B M key 的选择)

2.读写速度：查看M.2硬盘的规格表，注意其读取和写入速度。较高的读写速度表示更快的数据传输和加载时间。

3.随机读写性能：考虑M.2硬盘的随机读写性能，特别是在处理小文件或随机访问模式时。较高的随机读写性能可提供更好的多任务处理和响应能力。

4.延迟：注意M.2硬盘的延迟，即访问数据所需的时间。较低的延迟表示更快的响应时间。

5.耐久性：了解M.2硬盘的耐久性，通常通过TBW（Total Bytes Written）指标表示。较高的TBW值表示硬盘具有更长的寿命和更好的耐久性。

6.缓存：M.2硬盘的缓存大小也是考虑因素之一。较大的缓存可以提高读写性能，特别是在处理大文件时。

另外M.2硬盘的发热量是比较大的，能够对其做一些处理是最好的，温度太高也会影响性能，贴散热片、加装独立的散热风扇等可以降低温度

实际的性能需要主板于硬盘的双向结合，主板的M.2插槽实际能支持哪些协议的硬盘，不同接口的硬盘实际使用的什么协议都要认真甄别

### HHD（hybrid harddrive）：混合硬盘

混合硬盘（Hybrid Hard Drive，HHD），也称为混合固态硬盘（Hybrid Solid State Drive，HSSD），是一种结合了机械硬盘（HDD）和固态硬盘（SSD）的存储设备。它的设计旨在兼顾机械硬盘的大容量和固态硬盘的高性能。以下是混合硬盘的详细介绍：

构成：混合硬盘由机械硬盘和固态硬盘组成。通常，它包含一个机械硬盘部分和一个较小的固态硬盘缓存部分。机械硬盘用于存储大容量的数据，而固态硬盘缓存用于存储频繁访问的数据，以提供更快的读取和写入速度。

工作原理：混合硬盘利用固态硬盘的高速缓存来加速数据访问。当数据被写入混合硬盘时，一部分数据会被存储在固态硬盘缓存中，而剩余的数据则存储在机械硬盘中。当读取数据时，如果数据存在于固态硬盘缓存中，将以更快的速度进行读取。如果数据不在缓存中，则从机械硬盘中读取。

性能优势：混合硬盘的主要优势在于提供了相对较低的成本和较高的性能。通过利用固态硬盘的缓存，混合硬盘能够提供比传统机械硬盘更快的启动时间、文件传输速度和应用程序响应速度。尽管性能不如纯固态硬盘，但混合硬盘在性能和容量之间取得了一定的平衡。

缓存算法：混合硬盘使用智能缓存算法来确定哪些数据应该存储在固态硬盘缓存中。这些算法会根据数据的访问频率和重要性来进行决策。频繁访问的数据将被保留在固态硬盘缓存中，以提供更快的响应时间，而不常访问的数据则会被逐渐替换出缓存。

应用和适用性：混合硬盘适用于那些需要大容量存储和相对较高性能的场景。它们常用于便携式计算机、游戏主机和一些工作站等环境中，以平衡存储容量和性能需求。

需要注意的是，随着固态硬盘价格的下降和容量的增加，纯固态硬盘的普及度越来越高。混合硬盘逐渐被纯固态硬盘所取代，特别是在对性能要求更高的场景中。

没有使用过这类硬盘，就不做介绍了，但提供一种思路，在可以安装固态硬盘和机械硬盘的情况下，可以选择一个容量不大的固态硬盘搭配机械硬盘，通过特殊的设置让这块固态做为缓存，可以以较低的价格获得更好的体验。
